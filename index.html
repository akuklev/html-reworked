<!DOCTYPE html>
<html lang='en'>
<head>
  <title>HTML Reworked</title>
  <link rel="preload" href="components/xtag.tag" as="script">
  <link rel="preload" href="stylesheets/style.css" as="style">
  <link rel="preload" href="//rawgit.com/riot/riot/master/riot+compiler.min.js" as="script">
  <link rel='stylesheet' type="text/css" href='stylesheets/style.css'>
</head>

There is only one way to make a “rich text” document truly accessible: its source
must be easily readable as plain text, the only aid allowed being pretty-printing.
HTML was designed to be like that, but it fails miserably since 20 years.
Markdown &amp;co. do master it, but they are not overly extenstensible and
tend to overuse cryptic multigraphs where words would do just as good.<br/>
<span class='slogan'>Let's make HTML great again!</span>

<h1>HTML Reworked</h1>
Take HTML5, add back close-any tags (<code>&lt;/&gt;</code>) from SGML, notation
for empty tags (like in <code>&lt;br/&gt;</code>) and namespaces from XML, fix
square brackets as universal notation for expression interpolation, remove
moss-grown CDATA, entities and comments. Stop treating newlines near tags as whitespaces.<br/>
<br/>
Introduce concise syntax for most common attribute types: ids, classes, styles,
and processing directives (<code>@if</code>, <code>@each</code>, <code>@markdown</code>, <code>@prettyprint</code>, etc.), and abolish all other attributes
in favor of <a href='css-reworked'>extensible and reworked CSS</a>.<br/>
<br/>
Now add prettyprinting that makes tags look like complex brackets, not like a
part of the text, and restore the symmetry between opening and closing tags.<br/>
<br/>
Have you imagined it? Now that's what it can look like:    
<br/>
<br/>  
<xtag type='Div' xid='example'><div class='cindented'>
  Text with a <xtag type='Span' xclass='emph'>of text</xtag>,<br/> an <xtag type='Image' xopts='src: ./smiley.png'></xtag>, and an<br/>
  optional <xtag type='Button' play xdirs='if (ui-enabled)'></xtag>.</div>
</xtag><br/>
<br/>
Remarks on notation:<br/>
– id: right after tag type and classes;<br/>
– class: as subscript of tag separated by dot(s);<br/> 
– directives like <code>@if</code> and <code>@each</code>: in the end, separated by '<code>┆</code>';<br/>
– styles: just before directives, in braces.<br/>
<br/>
Futhermore we want to have syntax for links, images and alike almost as tidy
as in markdown. So we'll allow to omit tag name in closing tag (universal closing tag, remember?)
and/or move style section to the closing tag if the user considers text
more readable this way, e.g. <br/><xtag type='Image' xopts='src: ./figure.png' short={true}>alt text</xtag>,<br/>
and <xtag type='' xopts='ref: //www.example.org' short={true}>Link text</xtag>.<br/> In the latter case we make of the last additional feature:
anonymous tags, interpreted either as spans or a's (if only styles are present) or virtial tags (if only directives are present).<br/>
<br/>
Since reworked CSS we propose can contain new element definitions, it should be
considered a part of the DTD, so we propose the following doctype definition for our HTML flavour:
<pre><code>&lt;!<b>DOCTYPE</b> html @<b>with</b> /path/to/stylesheet&gt;</code></pre>
or, for embedded css:
<pre><code>&lt;!<b>DOCTYPE</b> html @<b>with</b> [
  ... // stylesheet
]&gt;</code></pre>

Correspondingly, style tags and stylesheet links must be abolished,
for stylesheets spanning over multiple files, <code>@import</code>
rules can be used:
<pre><code>&lt;!<b>DOCTYPE</b> html @<b>with</b> [
  @import <a href='css-reworked'>./common.css</a> screen, projection;
  @import <a href='css-reworked'>./landscape.css</a> screen and (orientation:landscape);
]&gt;</code></pre>

<h2>Dream of a Rich Text Language</h2>
The language I'd like to use to write everything I write (from
blog entries to scientific articles and embedded documentation
in programs I write) using a mix of multimarkdown and this
variety of HTML. I really like how multimarkdown handles
linebreaks, lists, quotations, citations, code insertions and
alike, I really like being able to write _underscores_ for emphasized
text, but I also like to be able to freely intermix all of this with
proper HTML which is more readable and readily understandable by
unexpirienced persons in all other cases (including links, images,
footnotes, etc.). Thankfully, Multimarkdown has nothing which would hamper
intermixing with the variety of HTML we just described.
<br/>
Given a library of components (such as date picker, spinner, etc) and pure
layout tags (mainly flexbox, block, overlay, inline, inline-block
and float) and ability to define your own components nicely, it would also
make a perfect language for designing UIs.<br/>
<br/>
Refs: <a href='http://akuklev.livejournal.com/1173309.html'>//akuklev.livejournal.com/1173309</a>

<script src='components/xtag.tag' type='riot/tag'></script>
<script src='//rawgit.com/riot/riot/master/riot+compiler.min.js'></script>
<script> riot.mount('*') </script>
</html>
